<!DOCTYPE html>
<html class="no-js" lang="en-US" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
<head>
    <meta charset="utf-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="description" content="">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="description" content="Diagnosing driver installation problems. A list of things to check">
<meta name="keywords" content="Development, MongoDB, Node.js, github, mongodb, js, Javascript, ">

 
<meta property="og:type" content="article"/>
<meta property="og:description" content="Diagnosing driver installation problems. A list of things to check"/>
<meta property="og:title" content="Diagnosing driver installation problems : christiankvalheim.com"/>
<meta property="og:site_name" content="Christian Kvalheim"/>
<meta property="og:image" content="" />
<meta property="og:image:type" content="image/jpeg" />
<meta property="og:image:width" content="" />
<meta property="og:image:height" content="" />
<meta property="og:url" content="http://localhost:1313/post/diagnose_installation_problems/">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="0001-01-01"/>
<meta property="article:modified_time" content="0001-01-01"/>

<meta property="article:tag" content="Development">
<meta property="article:tag" content="MongoDB">
<meta property="article:tag" content="Node.js">
<meta property="article:tag" content="github">
<meta property="article:tag" content="mongodb">
<meta property="article:tag" content="js">
<meta property="article:tag" content="Javascript">



<meta name="twitter:card" content="summary">

<meta name="twitter:site" content="@christkv">
<meta name="twitter:title" content="Diagnosing driver installation problems : christiankvalheim.com">
<meta name="twitter:creator" content="@christkv">
<meta name="twitter:description" content="Diagnosing driver installation problems. A list of things to check">
<meta name="twitter:image:src" content="">
<meta name="twitter:domain" content="christiankvalheim.com">



    <base href="http://localhost:1313/">
    <title> Diagnosing driver installation problems - christiankvalheim.com </title>
    <link rel="canonical" href="http://localhost:1313/post/diagnose_installation_problems/">
    

    <link href='http://fonts.googleapis.com/css?family=Fjalla+One|Open+Sans:300' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/static/css/style.css">
<link rel="stylesheet" href="http://yandex.st/highlightjs/8.0/styles/default.min.css">
<script src="http://yandex.st/highlightjs/8.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
		<link rel="stylesheet" href="http://yandex.st/highlightjs/8.0/styles/default.min.css">
		<script src="http://yandex.st/highlightjs/8.0/highlight.min.js"></script>
</head>

<body lang="en" itemscope itemtype="http://schema.org/Article">
<header id="header">
<figure>
      <a href="/" border=0 id="logolink"><img src="./logo.png"></img></a>
      </figure>
    <div id="byline">by Christian Kvalheim</div>
    <nav id="nav">
            <ul id="mainnav">
            <li>
                <a href="/post/">
                <span class="icon"> <i aria-hidden="true" class="icon-quill"></i></span>
                <span> blog </span>
            </a>
            </li>
            <li>
            <a href="/project/">
                <span class="icon"> <i aria-hidden="true" class="icon-console"></i></span>
                <span> code </span>
            </a>
            </li>
            <li>
            <a href="/presentation/">
                <span class="icon"> <i aria-hidden="true" class="icon-stats"></i></span>
                <span> talks </span>
            </a>
            </li>
        </ul>

            <ul id="social">
            <li id="share">
                <span class="icon icon-bubbles"> </span>
                <span class="title"> share </span>
                <div class="dropdown share">
                    <ul class="social">
                      <li> <a href="https://twitter.com/intent/tweet?status=Diagnosing%20driver%20installation%20problems-http%3a%2f%2flocalhost%3a1313%2fpost%2fdiagnose_installation_problems%2f" target="_blank" title="Follow me on Twitter" class="twitter"><span class="icon icon-twitter"></span>Twitter</a> </li>
                        <li> <a href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fpost%2fdiagnose_installation_problems%2f" target="_blank" title="Join me on Facebook" class="facebook"><span class="icon icon-facebook"></span>Facebook</a> </li>
                        <li> <a href="https://plus.google.com/share?url=http%3a%2f%2flocalhost%3a1313%2fpost%2fdiagnose_installation_problems%2f" target="_blank" title="Google+" class="googleplus"><span class="icon icon-google-plus"></span>Google+</a> </li>
                        <li> <a href="http://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2flocalhost%3a1313%2fpost%2fdiagnose_installation_problems%2f&title=Diagnosing%20driver%20installation%20problems&source=spf13" target="_blank" title="LinkedIn" class="linkedin"><span class="icon icon-linkedin"></span>LinkedIn</a> </li>
                        <li> <a href="http://del.icio.us/post?url=http%3a%2f%2flocalhost%3a1313%2fpost%2fdiagnose_installation_problems%2f" target="_blank" title="Delicious" class="delicious"><span class="icon icon-delicious"></span>Delicious</a> </li>
                        <li> <a href="http://www.reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fpost%2fdiagnose_installation_problems%2f" target="_blank" title="Reddit" class="reddit"><span class="icon icon-reddit"></span>Reddit</a> </li>
                        <li> <a href="http://www.stumbleupon.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fpost%2fdiagnose_installation_problems%2f" target="_blank" title="StumbleUpon" class="stumbleupon"><span class="icon icon-stumbleupon"></span>StumbleUpon</a> </li>
                    </ul>
                    <span class="subcount">sharing is caring</span>
                </div>
            </li>
            <li id="follow">
                <span class="icon icon-rocket"> </span>
                <span class="title"> follow </span>
                <div class="dropdown follow">
                    <ul class="social">
                        <li> <a href="http://christiankvalheim.com/index.xml" target="_blank" title="Subscribe by RSS" class="rss"><span class="icon icon-feed-2"></span>RSS</a> </li>
                        <li> <a href="http://www.twitter.com/christkv" target="_blank" title="Follow me on Twitter" class="twitter"><span class="icon icon-twitter"></span>Twitter</a> </li>
                        <li> <a href="http://www.linkedin.com/in/christkv" target="_blank" title="LinkedIn" class="linkedin"><span class="icon icon-linkedin"></span>LinkedIn</a> </li>
                        <li> <a href="http://github.com/christkv" target="_blank" title="GitHub" class="github"><span class="icon icon-github"></span>GitHub</a> </li>
                        <li> <a href="http://www.slideshare.net/christkv" target="_blank" title="SlideShare" class="slideshare"><span class="icon icon-slideshare"></span>SlideShare</a> </li>
                    </ul>
                    <span class="subcount">join 730+ followers and subscribers</span>
                </div>
            </li>
        </ul>

    </nav>
</header>



<section id="main">
  <h1 itemprop="name" id="title">Diagnosing driver installation problems</h1>
  <div>
        <article itemprop="articleBody" id="content">
           

<h1 id="the-mongodb-driver-is-not-installing-correctly:cf9d2f89abcf189c7253a5fe5d47d5d6">The MongoDB driver is not installing correctly</h1>

<p>Most of the problems are with the native BSON parser and there can be a multitude of reasons why it&rsquo;s not installing correctly and the driver is falling back to the js implementation of the serializer. This post will hopefully help you track down what the problem is on your system. We will start looking at it from a checklist point of view.</p>

<h2 id="build-essentials-linux-unix:cf9d2f89abcf189c7253a5fe5d47d5d6">Build Essentials Linux/Unix</h2>

<p>If you don&rsquo;t have the build essentials it won&rsquo;t build. In the case of linux you will need gcc and g++, node.js with all the headers and python. The easiest way to figure out what&rsquo;s missing is by trying to build the js-bson project. You can do this by performing the following steps.</p>

<pre><code>git clone https://github.com/mongodb/js-bson.git
cd js-bson
npm install
make test
</code></pre>

<p>If all the steps complete you have the right toolchain installed. If you get node-gyp not found you need to install it globally by doing.</p>

<pre><code>npm install -g node-gyp
</code></pre>

<p>If correctly compile and runs the tests you are golden. We can now try to install the mongod driver by performing the following command.</p>

<pre><code>cd yourproject
npm install mongod
</code></pre>

<p>If it still fails the next step is to examine the npm log. Rerun the command but in this case in verbose mode.</p>

<pre><code>npm --loglevel verbose install mongodb
</code></pre>

<p>This will print out all the steps npm is performing while trying to install the module.</p>

<h2 id="build-essentials-windows:cf9d2f89abcf189c7253a5fe5d47d5d6">Build Essentials Windows</h2>

<p>In windows there are pre-compiled binaries for bson. <strong>However</strong> these only work on 0.10.x or earlier as 0.11.x contains the completely breaking v8 API. So if you want to run 0.11.x you will have to set up your own build toolchain. So far I&rsquo;ve only had luck with the following combination.</p>

<pre><code>Visual Studio c++ 2010 (do not use higher versions)
Windows 7 64bit SDK
Python 2.7 or higher
</code></pre>

<p>Unfortunately you cannot easily use the make file under windows (I have not been able to do so correctly using MinGw).</p>

<p>Open visual studio command prompt. Ensure node.exe is in your path and install node-gyp.</p>

<pre><code>npm install -g node-gyp
</code></pre>

<p>Next you will have to build the project manually to test it. Use any tool you use with git and grab the repo.</p>

<pre><code>git clone https://github.com/mongodb/js-bson.git
cd js-bson
npm install
node-gyp rebuild
</code></pre>

<p>This should rebuild the driver successfully if you have everything set up correctly.</p>

<h2 id="other-possible-issues:cf9d2f89abcf189c7253a5fe5d47d5d6">Other possible issues</h2>

<p>Your python installation might be hosed making gyp break. I always recommend that you test your deployment environment first by trying to build node itself on the server in question as this should unearth any issues with broken packages (and there are a lot of broken packages out there).</p>

<p>Another thing is to ensure your user has write permission to wherever the node modules are being installed.</p>

        </article>
  </div>
</section>



<aside id="meta">

    <div>
        <section id="datecount">
          <h4 id="date"> Mon Jan 1, 0001 </h4>
          <h5 id="wc"> 500 Words </h5>
        </section>
        <ul id="categories">
          
            <li><a href="http://localhost:1313//topics/development">Development</a> </li>
          
            <li><a href="http://localhost:1313//topics/mongodb">MongoDB</a> </li>
          
            <li><a href="http://localhost:1313//topics/personal">Personal</a> </li>
          
        </ul>
        <ul id="tags">
          
            <li> <a href="http://localhost:1313//tags/mongodb">MongoDB</a> </li>
          
            <li> <a href="http://localhost:1313//tags/drivers">Drivers</a> </li>
          
            <li> <a href="http://localhost:1313//tags/github">github</a> </li>
          
            <li> <a href="http://localhost:1313//tags/mongodb">mongodb</a> </li>
          
            <li> <a href="http://localhost:1313//tags/javascript">Javascript</a> </li>
          
            <li> <a href="http://localhost:1313//tags/js">js</a> </li>
          
        </ul>
    </div>

    <div>
        <section id="prev">
            &nbsp;<a class="previous" href="http://localhost:1313/post/a_primer_for_gridfs_using_the_mongodb_driver/"><i class="icon-arrow-left"></i> A primer for GridFS using the Mongo DB driver</a><br>
        </section><section id="next">
            &nbsp;<a class="next" href="http://localhost:1313/post/the_new_bulk_api/">The New Bulk API <i class="icon-arrow-right"></i></a>
        </section>
    </div>

    <div>
        <section id="author">
             <h4>About the Author:</h4> 
                Christian Kvalheim is a Driver Team Lead and Evangalist for <a href="http://mongodb.com">MongoDB</a>. He is a open
                source contributor and author of the&nbsp;<a
                href="github.com/mongodb/node-mongodb-native"> MongoDB Node.js driver</a>. You can find him on <a href="http://twitter.com/christkv">Twitter</a> and&nbsp;
                <a href="http://github.com/christkv">Github</a>.
        </section>
    </div>

</aside>

<meta itemprop="wordCount" content="462">
<meta itemprop="datePublished" content="0001-01-01">
<meta itemprop="url" content="http://localhost:1313/post/diagnose_installation_problems/">


<aside id=comments>
    <div><h2> Comments </h2></div>
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'christiankvalheimcom';
    var disqus_identifier = '1912 http:\/\/christiankvalheim.com\/?p=1917';
    var disqus_title = 'Diagnosing driver installation problems';
    var disqus_url = 'http:\/\/christiankvalheim.com\/post\/diagnose_installation_problems\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</aside>

<footer>
  <div>
    <p>
    &copy; 2013-14 <span itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Christian Amor Kvalheim.</span></span>
    <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons Attribution">Some rights reserved</a>; 
    please attribute properly and link back. <br>
    Powered by <a href="http://hugo.spf13.com">Hugo</a>.
        Original content created by Steve Francia <a href="http://http://spf13.com/">http://spf13.com/</a>, Derived from <a href="https://github.com/spf13/spf13.com">https://github.com/spf13/spf13.com</a>.
    </p>
  </div>
</footer>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-15251477-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script');
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 
        'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(ga);
  })();

(function(){var j=function(a,b){return window.getComputedStyle?getComputedStyle(a).getPropertyValue(b):a.currentStyle[b]};var k=function(a,b,c){if(a.addEventListener)a.addEventListener(b,c,false);else a.attachEvent('on'+b,c)};var l=function(a,b){for(key in b)if(b.hasOwnProperty(key))a[key]=b[key];return a};window.fitText=function(d,e,f){var g=l({'minFontSize':-1/0,'maxFontSize':1/0},f);var h=function(a){var b=e||1;var c=function(){a.style.fontSize=Math.max(Math.min(a.clientWidth/(b*10),parseFloat(g.maxFontSize)),parseFloat(g.minFontSize))+'px'};c();k(window,'resize',c)};if(d.length)for(var i=0;i<d.length;i++)h(d[i]);else h(d);return d}})();
fitText(document.getElementById('title'), 1)

</script>
<script data-no-instant>document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
		+ ':1313/livereload.js?mindelay=10"></'
        + 'script>')</script></body>
</html>

